(function(f,g,r,z){var a=r.createElement,v=f.element.Fragment;g=g.registerBlockType;var k=f.blockEditor.MediaUpload,w=f.blockEditor.InspectorControls;g("wt/video-block",{title:"Video-Block",icon:"video-alt",category:"ycona-blocks",description:"Video with optional title. Uses custom video player (no native controls).",example:{},attributes:{title:{type:"string",default:""},video_url:{type:"string",default:""},video:{type:"object",default:null},poster:{type:"object",default:null},skin:{type:"string",
default:""},width:{type:"string",default:""},height:{type:"string",default:""},subtitles:{type:"array",default:[]},audio_tracks:{type:"array",default:[]}},edit:function(b){function f(){b.setAttributes({video:null,video_url:""})}function g(){b.setAttributes({poster:null})}function l(a,d,t){var c=m.map(function(c,b){if(b!==a)return c;b={};for(var h in c)b[h]=c[h];b[d]=t;return b});b.setAttributes({subtitles:c})}function r(a){var c=m.filter(function(c,b){return b!==a});b.setAttributes({subtitles:c})}
function n(a,d,t){var c=p.map(function(c,b){if(b!==a)return c;b={};for(var h in c)b[h]=c[h];b[d]=t;return b});b.setAttributes({audio_tracks:c})}function x(a){var c=p.filter(function(c,b){return b!==a});b.setAttributes({audio_tracks:c})}var q=b.attributes.video_url||b.attributes.video&&b.attributes.video.url||"",y=b.attributes.video_url||b.attributes.video&&b.attributes.video.url?"":"wt-video-not-present",m=b.attributes.subtitles||[],p=b.attributes.audio_tracks||[],e=b.attributes.skin||"",u="video-block-editor__skin-preview";
e&&(u+=" video-block-editor__skin-preview--"+e);return a(v,null,a(w,{key:"video-block-inspector"},a("div",{class:"webthiker-block-sidebar-element"})),a("div",{key:"video-block-edit",class:"webthiker-block video-block-editor "+y},a("h3",null,"Video-Block"),a("dl",null,a("dt",null,"Titel (optional)"),a("dd",null,a("input",{type:"text",value:b.attributes.title,placeholder:"Titel eingeben \u2026",onChange:function(a){b.setAttributes({title:a.target.value})}})),a("dt",null,"Video-URL"),a("dd",null,a("input",
{type:"text",value:q,placeholder:"https://example.com/video.mp4",onChange:function(a){b.setAttributes({video_url:a.target.value})}})),a("dt",null,"Video aus Mediathek"),a("dd",null,a(k,{onSelect:function(a){a&&a.url&&b.setAttributes({video:{url:a.url,id:a.id},video_url:a.url})},allowedTypes:["video"],value:b.attributes.video&&b.attributes.video.id?b.attributes.video.id:void 0,render:function(b){return a("button",{type:"button",className:"btn",onClick:b.open},"Video w\u00e4hlen")}}),q?a("button",{type:"button",
className:"btn-remove-video",onClick:f},"Video entfernen"):null),a("dt",null,"Poster-Bild (optional)"),a("dd",null,a(k,{onSelect:function(a){a&&a.url&&b.setAttributes({poster:{url:a.url,id:a.id}})},allowedTypes:["image"],value:b.attributes.poster&&b.attributes.poster.id?b.attributes.poster.id:void 0,render:function(b){return a("button",{type:"button",className:"btn",onClick:b.open},"Poster w\u00e4hlen")}}),b.attributes.poster&&b.attributes.poster.url?a("button",{type:"button",className:"btn-remove-video",
onClick:g},"Poster entfernen"):null),a("dt",null,"Player-Skin"),a("dd",{class:"video-block-editor__skin-field"},a("select",{value:e,onChange:function(a){b.setAttributes({skin:a.target.value})},className:"video-block-editor__skin-select"},[{value:"",label:"Default"},{value:"ocean",label:"Ocean"},{value:"cinema",label:"Cinema"},{value:"minimal",label:"Minimal"}].map(function(b){return a("option",{key:b.value,value:b.value},b.label)})),a("div",{class:u},a("span",{class:"video-block-editor__skin-dot"}),
a("span",null,e?e.charAt(0).toUpperCase()+e.slice(1):"Default"))),a("dt",null,"Breite & H\u00f6he (optional)"),a("dd",{class:"video-block-editor__dimensions-field"},a("label",{class:"video-block-editor__dim-label"},"Breite",a("input",{type:"text",value:b.attributes.width||"",placeholder:"z.B. 800px, 100%, 50vw",onChange:function(a){b.setAttributes({width:a.target.value})},className:"video-block-editor__dim-input"})),a("label",{class:"video-block-editor__dim-label"},"H\u00f6he",a("input",{type:"text",
value:b.attributes.height||"",placeholder:"z.B. 450px, auto",onChange:function(a){b.setAttributes({height:a.target.value})},className:"video-block-editor__dim-input"}))),a("dt",null,"Untertitel / Subtitles (optional)"),a("dd",{class:"video-block-editor__subtitles-field"},m.map(function(b,d){return function(c){return a("div",{key:"sub-"+c,class:"video-block-editor__subtitle-row"},a("div",{class:"video-block-editor__subtitle-url-row"},a("input",{type:"text",value:b.url||"",placeholder:"https://example.com/subs.vtt",
className:"video-block-editor__subtitle-input",onChange:function(a){l(c,"url",a.target.value)}}),a(k,{onSelect:function(a){a&&a.url&&l(c,"url",a.url)},allowedTypes:["text/vtt","text/plain"],render:function(b){return a("button",{type:"button",className:"btn video-block-editor__subtitle-upload-btn",onClick:b.open},"Upload .vtt")}})),a("div",{class:"video-block-editor__subtitle-meta-row"},a("input",{type:"text",value:b.label||"",placeholder:"Label (z.B. English)",className:"video-block-editor__subtitle-meta-input",
onChange:function(a){l(c,"label",a.target.value)}}),a("input",{type:"text",value:b.srclang||"",placeholder:"Lang (z.B. en)",className:"video-block-editor__subtitle-lang-input",onChange:function(a){l(c,"srclang",a.target.value)}}),a("button",{type:"button",className:"btn-remove-video video-block-editor__subtitle-remove-btn",onClick:function(){r(c)}},"\u2715")))}(d)}),a("button",{type:"button",className:"btn video-block-editor__subtitle-add-btn",onClick:function(){var a=m.concat([{url:"",label:"",srclang:"en",
kind:"subtitles"}]);b.setAttributes({subtitles:a})}},"+ Untertitel hinzuf\u00fcgen")),a("dt",null,"Audio-Tracks (optional)"),a("dd",{class:"video-block-editor__audio-tracks-field"},p.map(function(b,d){return function(c){return a("div",{key:"audio-"+c,class:"video-block-editor__audio-track-row"},a("div",{class:"video-block-editor__audio-track-url-row"},a("input",{type:"text",value:b.url||"",placeholder:"https://example.com/audio-de.mp3",className:"video-block-editor__audio-track-input",onChange:function(a){n(c,
"url",a.target.value)}}),a(k,{onSelect:function(a){a&&a.url&&n(c,"url",a.url)},allowedTypes:["audio"],render:function(b){return a("button",{type:"button",className:"btn video-block-editor__audio-track-upload-btn",onClick:b.open},"Upload Audio")}})),a("div",{class:"video-block-editor__audio-track-meta-row"},a("input",{type:"text",value:b.label||"",placeholder:"Label (z.B. Deutsch)",className:"video-block-editor__audio-track-meta-input",onChange:function(a){n(c,"label",a.target.value)}}),a("input",
{type:"text",value:b.lang||"",placeholder:"Lang (z.B. de)",className:"video-block-editor__audio-track-lang-input",onChange:function(a){n(c,"lang",a.target.value)}}),a("button",{type:"button",className:"btn-remove-video video-block-editor__audio-track-remove-btn",onClick:function(){x(c)}},"\u2715")))}(d)}),a("button",{type:"button",className:"btn video-block-editor__audio-track-add-btn",onClick:function(){var a=p.concat([{url:"",label:"",lang:""}]);b.setAttributes({audio_tracks:a})}},"+ Audio-Track hinzuf\u00fcgen"))),
a("div",{class:"video-block-editor__preview"},q?a("video",{src:q,controls:!0,style:{maxWidth:"100%"}}):a("span",null,"Kein Video gew\u00e4hlt. URL eingeben oder Video aus Mediathek w\u00e4hlen."))))},save:function(){return null}})})(window.wp,window.wp.blocks,window.wp.element,window.wp.data);
